<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Made You Look - åŠ¨æ€æ³¢çº¹</title>
<style>
  body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    overflow: hidden;
    background: #111;
    color: #fff;
  }

  h1 {
    margin: 20px 0 10px;
    font-size: 28px;
    text-align: center;
    z-index: 2;
    position: relative;
    text-shadow: 0 0 8px #fff;
  }

  #lyrics-container {
    position: relative;
    width: 90%;
    max-width: 550px;
    height: 360px;
    overflow-y: auto;
    background: rgba(0,0,0,0.4);
    border-radius: 20px;
    padding: 25px;
    text-align: center;
    line-height: 1.8;
    z-index: 2;
    backdrop-filter: blur(6px);
  }

  .line {
    color: rgba(255,255,255,0.7);
    font-size: 16px;
    margin: 6px 0;
    transition: all 0.3s ease;
  }

  .active {
    color: #ff4081;
    font-weight: bold;
    font-size: 18px;
    text-shadow: 0 0 12px #ff4081;
  }

  audio {
    width: 90%;
    max-width: 500px;
    height: 60px;
    margin: 20px 0;
    border-radius: 12px;
    z-index: 2;
    position: relative;
  }

  canvas {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1;
  }
</style>
</head>
<body>
<h1>Made You Look</h1>

<div id="lyrics-container">ğŸµ æ­£åœ¨åŠ è½½æ­Œè¯...</div>

<audio id="player" controls>
  <source src="Made you look.mp3" type="audio/mpeg">
  <source src="Made you look.aac" type="audio/aac">
  æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
</audio>

<canvas id="wave"></canvas>

<script>
  const audio = document.getElementById('player');
  const lyricsContainer = document.getElementById('lyrics-container');
  let lrcData = [];
  let activeIndex = -1;

  // åŠ è½½LRCæ­Œè¯
  fetch('Made you look.lrc')
    .then(res => res.text())
    .then(parseLRC)
    .catch(() => lyricsContainer.textContent = "âŒ æ‰¾ä¸åˆ°æ­Œè¯æ–‡ä»¶ã€‚");

  function parseLRC(text){
    const lines = text.split('\n');
    lrcData = [];
    lines.forEach(line=>{
      const match = line.match(/\[(\d{2}):(\d{2}\.\d{2})\](.*)/);
      if(match){
        const min=parseInt(match[1]);
        const sec=parseFloat(match[2]);
        const time=min*60+sec;
        const content=match[3].trim();
        if(content) lrcData.push({time, content});
      }
    });
    lrcData.sort((a,b)=>a.time-b.time);
    lyricsContainer.innerHTML = lrcData.map(l=>`<div class="line">${l.content}</div>`).join('');
  }

  // æ­Œè¯åŒæ­¥
  audio.addEventListener('timeupdate',()=>{
    if(lrcData.length===0) return;
    const current = audio.currentTime;
    for(let i=0;i<lrcData.length;i++){
      if(current >= lrcData[i].time && (i===lrcData.length-1 || current < lrcData[i+1].time)){
        if(i !== activeIndex){
          activeIndex=i;
          updateActiveLine();
        }
        break;
      }
    }
  });

  function updateActiveLine(){
    const lines = lyricsContainer.querySelectorAll('.line');
    lines.forEach((line,i)=>line.classList.toggle('active', i===activeIndex));
    const activeLine = lines[activeIndex];
    if(activeLine){
      lyricsContainer.scrollTop = activeLine.offsetTop - lyricsContainer.clientHeight/2 + activeLine.clientHeight/2;
    }
  }

  // ğŸŒŠ æ³¢çº¹åŠ¨ç”»
  const canvas=document.getElementById('wave');
  const ctx=canvas.getContext('2d');
  let W=canvas.width=window.innerWidth;
  let H=canvas.height=window.innerHeight;

  const wave = { t:0 };

  function drawWave(){
    ctx.clearRect(0,0,W,H);
    const gradient = ctx.createLinearGradient(0,0,W,H);
    gradient.addColorStop(0,'#ff6a6a');
    gradient.addColorStop(0.5,'#ff4081');
    gradient.addColorStop(1,'#ff6a6a');

    ctx.fillStyle = gradient;
    ctx.beginPath();
    ctx.moveTo(0,H/2);
    for(let x=0;x<W;x+=1){
      const y = H/2 + Math.sin((x*0.02)+wave.t)*30*Math.sin(wave.t/10);
      ctx.lineTo(x,y);
    }
    ctx.lineTo(W,H);
    ctx.lineTo(0,H);
    ctx.closePath();
    ctx.fill();
    wave.t+=0.05;
    requestAnimationFrame(drawWave);
  }
  drawWave();

  window.addEventListener('resize',()=>{
    W=canvas.width=window.innerWidth;
    H=canvas.height=window.innerHeight;
  });
</script>
</body>
</html>
